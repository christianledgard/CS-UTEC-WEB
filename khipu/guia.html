<!doctype html>
<html lang="Default">
<head>
    <meta charset="utf-8">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <link rel="shortcut icon" type="image/png" href="favicon.png">
    
	<link rel="stylesheet" type="text/css" href="./css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="style.css">
	<link rel="stylesheet" type="text/css" href="./css/animate.min.css">
	<link rel="stylesheet" type="text/css" href="./css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="./css/ionicons.min.css">
	<link rel="stylesheet" type="text/css" href="./css/feather.min.css">
	<link href='https://fonts.googleapis.com/css?family=Ubuntu&amp;subset=latin,latin-ext' rel='stylesheet' type='text/css'>
    
	<script src="./js/jquery-2.1.0.min.js"></script>
	<script src="./js/bootstrap.min.js"></script>
	<script src="./js/blocs.min.js"></script>
	<script src="./js/lazysizes.min.js" defer></script>
    <title>Guia</title>

    
<!-- Analytics -->
 
<!-- Analytics END -->
    
</head>
<body>
<!-- Main container -->
<div class="page-container">
    
<!-- bloc-0 -->
<div class="bloc bgc-maya-blue l-bloc sticky-nav full-width-bloc" id="bloc-0">
	<div class="container">
		<nav class="navbar row">
			<div class="navbar-header">
				<a class="navbar-brand  ltc-white" href="index.html">KHIPU</a>
				<button id="nav-toggle" type="button" class="ui-navbar-toggle navbar-toggle" data-toggle="collapse" data-target=".navbar-1">
					<span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
				</button>
			</div>
			<div class="collapse navbar-collapse navbar-1">
				<ul class="site-navigation nav navbar-nav hidden-lg hidden-md">
					<li>
						<a href="infraestructura.html" class="ltc-white-2">Khipu</a>
					</li>
					<li>
						<a href="politica.html" class="ltc-white-2">Política</a>
					</li>
					<li>
						<a href="guia.html" class="ltc-white-2">Guía de uso</a>
					</li>
					<li>
						<a href="software.html" class="ltc-white-2">Software</a>
					</li>
					<li>
						<a href="reportes.html" class="ltc-white-2">Reportes</a>
					</li>
				</ul>
			</div>
		</nav>
	</div>
</div>
<!-- bloc-0 END -->

<!-- Bloc Group -->
<div class='bloc-group'>

<!-- bloc-5 -->
<div class="bloc bgc-white bloc-tile-2 side20" id="bloc-5">
	<div class="container bloc-sm">
		<div class="row transp voffset hidden-sm hidden-xs animated fadeIn sidebar--sticky">
			<div class="col-sm-12">
				<ul class="list-unstyled list-sp-md">
					<li>
						<h5 class="mg-md tc-outer-space">
							<strong>Contenido</strong>
						</h5><a href="infraestructura.html" class="btn btn-d buttoncolor btn-block">Khipu</a>
					</li>
					<li>
						<a href="politica.html" class="btn btn-block btn-d buttoncolor">Política de uso</a>
					</li>
					<li>
						<a href="guia.html" class="btn btn-d btn-block actived_option_menu buttoncolor">Guía de uso</a>
					</li>
					<li>
						<a href="software.html" class="btn btn-d btn-block buttoncolor">Software</a>
					</li>
					<li>
						<a href="reportes.html" class="btn btn-d btn-block buttoncolor">Reportes</a>
					</li>
				</ul>
			</div>
		</div>
	</div>
</div>
<!-- bloc-5 END -->

<!-- bloc-6 -->
<div class="bloc bgc-white bloc-tile-2 side80 tc-outer-space none" id="bloc-6">
	<div class="container bloc-sm">
		<div class="row bgc-white voffset">
			<div class="col-sm-12">
				<h2 class="mg-md tc-outer-space">
					<strong>Guía de uso</strong>
				</h2>
				<div class="alert alert-success">
					<p>
						<strong>Importante:</strong> Esta guía considera el uso de un terminal en Linux, MacOS o Windows 10. &nbsp;<br>Última actualización: 23 Agosto 2020.
					</p>
				</div>
				<h4 class="tc-outer-space mg-md">
					<strong>Acceso e inicio de sesión</strong>
				</h4>
				<p>
					1. Abrir un terminal y escribir el siguiente comando reemplazando su nombre de usuario en el campo &lt;username&gt;.
				</p>
				<div class="alert alert-success codeformat">
					<p>
						ssh &lt;username&gt;@khipu.utec.edu.pe
					</p>
				</div>
				<p>
					Ejemplo:
				</p>
				<div class="alert alert-success codeformat">
					<p>
						ssh juana.perez@khipu.utec.edu.pe
					</p>
				</div>
				<p>
					2. Aparecerá el siguiente diálogo. Aceptar escribiendo yes y presionar enter. Luego colocar el password (este no aparecerá en pantalla al escribir) y presionar enter.<br>
				</p>
				<div class="alert alert-success codeformat">
					<p>
						Are you sure you want to continue connecting (yes/no)? <br>juana.perez@khipu.utec.edu.pe's password:<br>
					</p>
				</div>
				<p>
					3. Al lograr accesar al cluster aparecerá el prompt del terminal remoto.
				</p>
				<div class="alert alert-success codeformat">
					<p>
						Last login: Fri Aug 21 11:28:13 2020 from 190.236.197.233<br>[juanaperez@khipu ~]$<br>
					</p>
				</div>
				<p>
					4. Para cerrar o salir del cluster:
				</p>
				<div class="alert alert-success codeformat">
					<p>
						[juana.perez@khipu ~]$ exit<br>
					</p>
				</div>
				<p>
					5. Opcional: para accesar sin escribir la contraseña deben copiar la llave pública de su computador hacia el cluster.<br>La llave pública debe haber sido creada previamente con el siguiente comando (recomendamos usar los valores por defecto presionando ENTER).<br>
				</p>
				<div class="alert alert-success codeformat">
					<p>
						ssh-keygen<br>
					</p>
				</div>
				<p>
					Linux o MacOS:
				</p>
				<div class="alert alert-success codeformat">
					<p>
						ssh-copy-id -i ~/.ssh/id_rsa.pub juana.perez@khipu.utec.edu.pe<br>
					</p>
				</div>
				<p>
					Windows:
				</p>
				<div class="alert alert-success codeformat">
					<p>
						type %HOMEPATH%\.ssh\id_rsa.pub | ssh juana.perez@khipu.utec.edu.pe "mkdir .ssh; cat &gt;&gt; .ssh/authorized_keys"<br>
					</p>
				</div>
				<h4 class="mg-md">
					<strong>Slurm</strong>
				</h4>
				<p>
					Slurm es un gestor de filas de trabajos (jobs) que permite organizar de forma eficiente el uso de recursos compartido del cluster. Slurm asigna recursos a los jobs de acuerdo con la prioridad del trabajo y la cantidad de recursos solicitados versus disponibles.&nbsp;Slurm tiene un reparto de prioridad justo, donde cada job tiene una prioridad que depende de: a) los recursos usados por el usuario o grupo, b) la contribución del grupo al clúster y c) el tiempo en fila. Por favor, revisar&nbsp;<a href="infraestructura.html">grupos en Khipu</a>&nbsp;para más detalles de recursos.<br>Los comandos más usados son:
				</p>
				<blockquote>
					<p>
						sbatch: permite adicionar jobs a la fila mediante un script. <a href="https://slurm.schedmd.com/quickstart.html" target="_blank">Link del manual de sbatch</a>.
					</p>
				</blockquote>
				<blockquote>
					<p>
						srun: permite adicionar jobs en modo interactivo lo que permite probar comandos que se usarán en el script así como depurarlo.&nbsp;<a href="https://slurm.schedmd.com/srun.html" target="_blank">Link del manual de srun</a>.
					</p>
				</blockquote>
				<blockquote>
					<p>
						scancel: termina la ejecución de un determinado job, independientemente si está o no en ejecución.&nbsp;<a href="https://slurm.schedmd.com/scancel.html" target="_blank">Link del manual de scancel.</a>
					</p>
				</blockquote>
				<blockquote>
					<p>
						squeue: permite visualizar el estado actual de la fila de jobs.&nbsp;<a href="https://slurm.schedmd.com/squeue.html" target="_blank">Link del manual de squeue.</a>
					</p>
				</blockquote>
				<p>
					1. Para mandar a ejecutar un job usando el script de ejemplo ej1.sh. Ver script en&nbsp;<a onclick="scrollToTarget(2)">Ejemplos</a>.
				</p>
				<div class="alert alert-success codeformat">
					<p>
						[juana.perez@khipu ~]$ sbatch ej1.sh<br>Submitted batch job 91<br>
					</p>
				</div>
				<p>
					2. Para mostrar la fila actual de jobs:
				</p>
				<div class="alert alert-success codeformat">
					<p>
						[juana.perez@khipu ~]$ squeue<br> JOBID &nbsp; &nbsp; &nbsp;PARTITION &nbsp; &nbsp;NAME &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;USER &nbsp; &nbsp;ST &nbsp;TIME NODES NODELIST(REASON)<br>&nbsp; &nbsp; &nbsp; &nbsp;91 &nbsp; &nbsp;investigacion &nbsp; &nbsp; &nbsp; &nbsp;EJ2 &nbsp; &nbsp; juana.perez &nbsp; &nbsp; &nbsp;R &nbsp; &nbsp;0:29 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1 &nbsp;n001<br>
					</p>
				</div>
				<p>
					3. Para mostrar todos los detalles del job 91:
				</p>
				<div class="alert alert-success codeformat">
					<p>
						[juana.perez@khipu ~]$ scontrol show job 91<br>
					</p>
				</div>
				<p>
					4. Para cancelar la ejecución del job 91:
				</p>
				<div class="alert alert-success codeformat">
					<p>
						[juana.perez@khipu ~]$ scancel 91<br>
					</p>
				</div>
				<h5 class="mg-md">
					<strong>Directivas de jobs</strong>
				</h5>
				<div class="alert alert-success">
					<p>
						<strong>Importante:</strong>&nbsp;verificar los recursos de <a href="infraestructura.html"> Khipu</a>. Slurm regulará automáticamente en caso el usuario exceda las capacidades del Grupo de Usuario.
					</p>
				</div>
				
					<table role="grid" class="table" resolved="" id="sort">
                                <colgroup>
                                    <col>
                                    <col>
                                    <col>
                                </colgroup>
                                <thead class="header-table">
                                    <tr role="row">
                                        <th data-column="0" tabindex="0" scope="col" role="columnheader" aria-disabled="false" unselectable="on" aria-sort="none" aria-label="Directive: No sort applied, activate to apply an ascending sort">
						<p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">Directiva
						<span>⇕</span>
						</p>
					</th>
                                        <th data-column="1" tabindex="0" scope="col" role="columnheader" aria-disabled="false" unselectable="on" aria-sort="none" aria-label="Short Version: No sort applied, activate to apply an ascending sort"><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">Versión corta
						<span>⇕</span>
						</p></th>
                                        <th data-column="2" tabindex="0" scope="col" role="columnheader" aria-disabled="false" unselectable="on" aria-sort="none" aria-label="Description: No sort applied, activate to apply an ascending sort"><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">Descripción
						<span>⇕</span>
						</p></th>
                                    </tr>
                                </thead>
                                <tbody aria-live="polite" aria-relevant="all">
                                    <tr role="row">
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">--job-name=&lt;Nombrejob &gt;</p></td>
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">-J &lt;Nombrejob &gt;</p></td>
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">Nombre del job.</p></td>
                                    </tr>
                                    <tr role="row">
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">--time=&lt;tiempo&gt;</p></td>
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">-t &lt;tiempo&gt;</p></td>
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">Tiempo requerido.</p></td>
                                    </tr>
                                    <tr role="row">
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">--mem=&lt;memoria&gt;</p></td>
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;"> </p></td>
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">Memoria requerida por nodo.</p></td>
                                    </tr>
                                    <tr role="row">
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">--error = &lt;rutaArchivo.log &gt; </p></td>
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">-e &lt;rutaArchivo.log &gt; </p></td>
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">Ruta de archivo para almacenar<br>errores en jobs.</p></td>
                                    </tr>
                                    <tr role="row">
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">--output= &lt;rutaArchivo.log &gt; </p></td>
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">-o &lt;rutaArchivo.log &gt; </p></td>
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">Ruta de archivo para almacenar<br> la salida estandar del job.</p></td>
                                    </tr>
                                    <tr role="row">
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">--cpus-per-task=&lt;cpus&gt;</p></td>
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">-c &lt;cpus&gt;</p></td>
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">Núcleos CPU por tarea.</p></td>
                                    </tr>
                                    <tr role="row">
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">--nodes=&lt;nodes&gt;</p></td>
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">-N &lt;nodes&gt;</p></td>
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">Nodos requeridos por job.</p></td>
                                    </tr>
                                    <tr role="row">
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">--gres=gpu:&lt;cantidadGPU&gt;</p></td>
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;"></p></td>
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">Especifica la cantidad de tarjetas<br> GPU que se necesitan.</p></td>
                                    </tr>
                                    <tr role="row">
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">--export=var1=valor[,var2=valor...]</p></td>
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;"></p></td>
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">Especifica los valores de las variables de<br> entorno en la ejecución del script.</p></td>
                                    </tr>
                                    <tr role="row">
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">--nodes=&lt;numeroNodos&gt;</p></td>
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">-N &lt;numeroNodos&gt;</p></td>
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">Número de nodos solicitados para la <br>ejecución de los jobs.</p></td>
                                    </tr>
                                    <tr role="row">
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">after:job_id[[+time][:jobid[+time]...]]</p></td>
                                        <td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;"></p></td>
					<td><p data-tablet-text-size="14px" data-mobile-text-size="14px" class="" data-desktop-text-size="14px" style="font-size: 14px;">El job se mandará a la fila luego que<br> otro job termine su ejecución.</p></td>
                                    </tr>
                                    <tr role="row">
                                        <td colspan="1">--mail-type=&lt;ALL,BEGIN,END,FAIL,NONE&gt;</td>
                                        <td colspan="1"><br></td>
                                        <td colspan="1">Enviar notificaciones de job a email</td>
                                    </tr>
                                    <tr role="row">
                                        <td colspan="1">--mail-user=&lt;email_address&gt;  </td>
                                        <td colspan="1"><br></td>
					<td colspan="1">Correo electrónico</td>
                                    </tr>
                                </tbody>
                            </table>
    
        <!-- Icons -->
        <script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script>
        <script>feather.replace()</script>
        <!--- Table Sort -->
        <script src="./js/tablesort.js"></script>
        <script>
          new Tablesort(document.getElementById('sort'));
        </script>
					
				
				<h5 class="mg-md">
						<strong>Ejemplos de job scripts</strong>
					</h5>
				<h6 class="mg-sm">
						<strong>Ejemplo 1</strong>
					</h6>
				<p>
						Imprime la fecha actual. <br>1. Crear el archivo ej1.sh:
					</p>
				<div class="alert alert-info">
						<p>
							#!/bin/bash<br>#SBATCH --job-name=ej1 # nombre del job<br>#SBATCH -c 1 # numero de cpu cores a usar <br>#SBATCH --mem-per-cpu=100mb # tamano de memoria del job en ejecucion. <br>date<br>sleep 10 # duerme 10s, solo para visualizar el job en la fila<br>
						</p>
					</div>
				<p>
						2. Enviar a ejecutar el job:
					</p>
				<div class="alert alert-success codeformat">
						<p>
							[juana.perez@khipu ~]$ sbatch ej1.sh
						</p>
					</div>
				<h6 class="mg-sm">
						<strong>Ejemplo 2</strong>
					</h6>
				<p>
						Imprime "Hello World”. <br>1. Crear el archivo ej2.sh:
					</p>
				<div class="alert alert-info">
						<p>
							#!/bin/bash<br>#SBATCH --job-name=ej2 &nbsp;# nombre del job.<br>#SBATCH -c 1 # numero de cpu cores a usar.<br>#SBATCH --time=1:00 # tiempo maximo de ejecucion del job.<br>#SBATCH --mem-per-cpu=100mb # tamano de memoria del job en ejecucion. <br>echo "Hello World” # imprime Hello World<br>sleep 10&nbsp;# duerme 10s<br><br># End of script<br>
						</p>
					</div>
				<p>
						2. Enviar a ejecutar el job:
					</p>
				<div class="alert alert-success codeformat">
						<p>
							[juana.perez@khipu ~]$ sbatch ej2.sh
						</p>
					</div>
				<h6 class="mg-sm">
						<strong>Ejemplo 3</strong>
					</h6>
				<p>
						Muestra las variables de ambiente propias de Slurm. <br>1. Crear el archivo ej3.sh:
					</p>
				<div class="alert alert-info">
						<p>
							#!/bin/bash<br>#SBATCH -J ej3 # nombre del job<br>set | grep SLURM<br>
						</p>
					</div>
				<p>
						2. Enviar a ejecutar el job:
					</p>
				<div class="alert alert-success codeformat">
						<p>
							[juana.perez@khipu ~]$ sbatch ej3.sh
						</p>
					</div>
				<h6 class="mg-sm">
						<strong>Ejemplo 4</strong>
					</h6>
				<p>
						Ejecución del programa en Openmpi, prueba_mpi.c:&nbsp;<br>
					</p>
				<div class="alert alert-warning">
						<p>
							#include &lt;mpi.h&gt;<br>#include &lt;stdio.h&gt;<br><br>int main(int argc, char** argv) {<br> // Initialize the MPI environment<br> MPI_Init(NULL, NULL);<br><br> // Get the number of processes<br> int world_size;<br> MPI_Comm_size(MPI_COMM_WORLD, &amp;world_size);<br><br><br> // Get the rank of the process<br> int world_rank;<br> MPI_Comm_rank(MPI_COMM_WORLD, &amp;world_rank);<br><br> // Get the name of the processor<br> char processor_name[MPI_MAX_PROCESSOR_NAME];<br> int name_len;<br> MPI_Get_processor_name(processor_name, &amp;name_len);<br><br> // Print off a hello world message<br> printf("Hello world from processor %s, rank %d out of %d processors\n",<br> processor_name, world_rank, world_size);<br><br> // Finalize the MPI environment.<br> MPI_Finalize();<br>}<br>
						</p>
					</div>
				<p>
						1. Compilar el programa mpi:
					</p>
				<div class="alert alert-success codeformat">
						<p>
							[juana.perez@khipu ~]$ module load openmpi/2.1.6<br>[juana.perez@khipu ~]$ mpicc prueba_mpi.c -o prueba_mpi <br>[juana.perez@khipu ~]$ module unload openmpi/2.1.6<br>
						</p>
					</div>
				<p>
						2. Crear el archivo ej4.sh:
					</p>
				<div class="alert alert-info">
						<p>
							#!/bin/bash<br>#SBATCH -J ej4 # nombre del job<br>#SBATCH -p investigacion # nombre de la particion&nbsp;<br>#SBATCH -N 2 # numero de nodos<br>#SBATCH --tasks-per-node=3 # numero de tasks por nodo<br><br>module load openmpi/2.1.6 # carga el modulo de openmpi version 2.1.6<br>srun prueba_mpi # siendo prueba_mpi el nombre del programa mpi <br>module unload openmpi/2.1.6&nbsp;<br>
						</p>
					</div>
				<p>
						3. Enviar a ejecutar el job:
					</p>
				<div class="alert alert-success codeformat">
						<p>
							[juana.perez@khipu ~]$ sbatch ej4.sh
						</p>
					</div>
				<h6 class="mg-sm">
						<strong>Ejemplo 5</strong>
					</h6>
				<p>
						Ejecución del programa en Python, prueba_python.py:
					</p>
				<div class="alert alert-warning">
						<p>
							from math import factorial as f<br><br>print("Hola mundo")<br>N = 100<br>print("%d! = %d" %(N, f(N)))<br>
						</p>
					</div>
				<p>
						1. Crear el archivo ej5.sh:
					</p>
				<div class="alert alert-info">
						<p>
							#!/bin/bash<br>#SBATCH -J ej5 # nombre del job<br>#SBATCH -p investigacion # nombre de la particion&nbsp;<br>#SBATCH -c 1 &nbsp;# numero de cpu cores a usar<br><br>module load python/2.7.17 # carga el modulo de python version 2.7.17<br>python2.7 prueba_python.py # siendo prueba_python.py el nombre del programa python <br>module unload python/2.7.17&nbsp;<br>
						</p>
					</div>
				<p>
						2. Enviar a ejecutar el job:
					</p>
				<div class="alert alert-success codeformat">
						<p>
							[juana.perez@khipu ~]$ sbatch ej5.sh
						</p>
					</div>
				<h6 class="mg-sm">
						<strong>Ejemplo 6</strong>
					</h6>
				<p>
						Ejemplo de ejecución del programa OpenMP, prueba_openmp.c:
					</p>
				<div class="alert alert-warning">
						<p>
							#include &lt;stdio.h&gt;<br>#include &lt;stdlib.h&gt;<br>#include &lt;omp.h&gt;<br><br>void Hello(void); /* Thread function */<br><br>/*--------------------------------------------------------------------*/<br>int main(int argc, char* argv[]) {<br> int thread_count = strtol(argv[1], NULL, 10);<br> # pragma omp parallel num_threads(thread_count)<br> Hello();<br> return 0;<br>}<br><br>/* main */<br>/*------------------------------------------------------------------- * Function: Hello<br> * * Purpose: Thread function that prints message<br> * */<br>void Hello(void) {<br> int my_rank = omp_get_thread_num();<br> int thread_count = omp_get_num_threads();<br> printf("Hello from thread %d of %d\n", my_rank, thread_count); /* Hello */<br>}<br>
						</p>
					</div>
				<p>
						1. Compilar el programa prueba_openmp.c:
					</p>
				<div class="alert alert-success codeformat">
						<p>
							[juana.perez@khipu ~]$ module load gcc/5.5.0 <br>[juana.perez@khipu ~]$ g++ prueba_openmp.c -fopenmp -lpthread -o prueba_openmp <br>[juana.perez@khipu ~]$ module unload gcc/5.5.0
						</p>
					</div>
				<p>
						2. Crear el archivo ej6.sh:
					</p>
				<div class="alert alert-info">
						<p>
							#!/bin/bash<br>#SBATCH -J ej6<br>#SBATCH -N 1<br>#SBATCH --tasks-per-node=8<br>#SBATCH --mem=1GB<br> <br>module load gcc/5.5.0<br>unset OMP_NUM_THREADS<br><br>./ejemplo_openmp ${SLURM_NPROCS} <br>module unload gcc/5.5.0<br>
						</p>
					</div>
				<p>
						2. Enviar a ejecutar el job:
					</p>
				<div class="alert alert-success codeformat">
						<p>
							[juana.perez@khipu ~]$ sbatch ej6.sh
						</p>
					</div>
				<h6 class="mg-sm">
						<strong>Ejemplo 7</strong>
					</h6>
				<p>
						Ejecución de dos jobs, donde uno depende del término del otro. <br>1. Crear los archivos ej7-1.sh y ej7-2.sh:
					</p>
				<div class="alert alert-info">
						<p>
							#!/bin/bash<br>#SBATCH -J ej7-1<br>#SBATCH -N 1<br>#SBATCH --tasks-per-node=1<br>#SBATCH --mem=1GB<br><br>echo "ej7-1"<br>date<br>sleep 120<br>date<br>
						</p>
					</div>
				<div class="alert alert-info">
						<p>
							#!/bin/bash<br>#SBATCH -J ej7-2<br>#SBATCH -N 1<br>#SBATCH --tasks-per-node=1<br>#SBATCH --mem=1GB<br><br>echo "ej7-2"<br>date<br>sleep 120<br>date<br>
						</p>
					</div>
				<p>
						2. Enviar a ejecutar los jobs:
					</p>
				<div class="alert alert-success codeformat">
						<p>
							[juana.perez@khipu ~]$ n_proc=$(sbatch ej7-1.sh) <br>[juana.perez@khipu ~]$ sbatch -d after:${n_proc##* } ej7-2.sh <br>[juana.perez@khipu ~]$ squeue
						</p>
					</div>
				<h6 class="mg-sm">
						<strong>Ejemplo 8</strong>
					</h6>
				<p>
						Muestra como pasar variables a los jobs, esto permite setear variables de ambiente para la ejecución dentro de nuestro script. No es recomendable usar seteos de variables direcamente como comandos Unix. Existen dos formas: <br>1. Colocar el set de variables que se necesita en el script mediante el flag “#SBATCH --export=var1=valor,var2=valor…”.&nbsp; <br>Crear el archivo ej8-1.sh:
					</p>
				<div class="alert alert-info">
						<p>
							#!/bin/bash<br>#SBATCH -J ej8-1 <br>#SBATCH -N 1 <br>#SBATCH --tasks-per-node=1 <br>#SBATCH --mem=1GB <br>#SBATCH --export=var1=12 <br> <br>echo $var1
						</p>
					</div>
				<p>
						Enviar a ejecutar el job:
					</p>
				<div class="alert alert-success codeformat">
						<p>
							[juana.perez@khipu ~]$ sbatch ej8-1.sh
						</p>
					</div>
				<p>
						2. Especificar el valor de las variables al momento del envío del script. Brinda flexibilidad y es recomendable usarlo cuando solo varían pocos parámetros, como el nombre de un archivo o valor único. <br>Crear el archivo ej8-2.sh:
					</p>
				<div class="alert alert-info">
						<p>
							#!/bin/bash<br>#SBATCH -J ej8-2 <br>#SBATCH -N 1 <br>#SBATCH --tasks-per-node=1 <br>#SBATCH --mem=1GB <br> <br>echo $var1
						</p>
					</div>
				<p>
						Enviar a ejecutar el job pasándole las variables:
					</p>
				<div class="alert alert-success codeformat">
						<p>
							[juana.perez@khipu ~]$ sbatch --export=var1=15 ej8-2.sh
						</p>
					</div>
				<h4 class="mg-md">
						<strong>Información adicional</strong>
					</h4>
				<p>
						<a href="https://www.tecmint.com/free-online-linux-learning-guide-for-beginners/" target="_blank">Tutorial de Linux</a><br>
					</p>
				<p>
						<a href="https://slurm.schedmd.com/quickstart.html" target="_blank">Documentación de Slurm</a><br>
					</p>
			</div>
		</div>
	</div>
</div>
<!-- bloc-6 END -->
</div>
<!-- Bloc Group END -->

<!-- ScrollToTop Button -->
<a class="bloc-button btn btn-d scrollToTop" onclick="scrollToTarget('1')"><span class="fa fa-chevron-up"></span></a>
<!-- ScrollToTop Button END-->


</div>
<!-- Main container END -->
    


<!-- Preloader -->
<div id="page-loading-blocs-notifaction"></div>
<!-- Preloader END -->

</body>
</html>
